<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
  <title>NBA GM 單機版（更新的）</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background:#f5f5f5;
      padding:20px;
    }
    h1 { margin-bottom: 5px; }
    .version {
      color: red;
      font-weight: bold;
      margin-bottom: 15px;
    }
    button {
      margin: 5px;
      padding: 8px 14px;
      cursor: pointer;
    }
    table {
      border-collapse: collapse;
      margin-top: 15px;
      background: white;
    }
    th, td {
      border: 1px solid #ccc;
      padding: 6px 10px;
      text-align: center;
    }
    #initialGames {
      margin-top: 15px;
      padding: 10px;
      background: #fff;
    }
    #log {
      margin-top: 15px;
      background: #fff;
      padding: 10px;
      min-height: 60px;
    }
  </style>
</head>
<body>

<h1>NBA GM 單機版</h1>
<div class="version">（更新的｜Step 2 修正版）</div>

<!-- Step 1 -->
<h2>Step 1：選擇你的球隊</h2>
<select id="teamSelect"></select>
<button id="confirmTeam">確認選擇</button>

<!-- Step 2 -->
<div id="initialGames" style="display:none;">
  <h2>Step 2：選擇初始比賽</h2>
  <button id="btn1">單場測試</button>
  <button id="btn5">5 場季前賽</button>
  <button id="btn82">82 場例行賽</button>
</div>

<!-- 球員表 -->
<h2>你的球隊陣容</h2>
<table id="roster">
  <thead>
    <tr>
      <th>球員</th>
      <th>位置</th>
      <th>Overall</th>
    </tr>
  </thead>
  <tbody></tbody>
</table>

<!-- 紀錄 -->
<div id="log">等待操作中…</div>

<script>
console.log("JS LOADED - UPDATED VERSION");

// ===== 資料 =====
const teams = {
  Warriors: [
    {name:"Stephen Curry", pos:"PG", ovr:97},
    {name:"Klay Thompson", pos:"SG", ovr:88},
    {name:"Draymond Green", pos:"PF", ovr:86}
  ],
  Lakers: [
    {name:"LeBron James", pos:"SF", ovr:96},
    {name:"Anthony Davis", pos:"PF", ovr:94}
  ],
  Celtics: [
    {name:"Jayson Tatum", pos:"SF", ovr:95},
    {name:"Jaylen Brown", pos:"SG", ovr:92}
  ]
};

let playerTeam = null;

// ===== 初始化 =====
window.addEventListener("DOMContentLoaded", () => {
  const select = document.getElementById("teamSelect");
  Object.keys(teams).forEach(t => {
    const opt = document.createElement("option");
    opt.value = t;
    opt.textContent = t;
    select.appendChild(opt);
  });

  document.getElementById("confirmTeam").addEventListener("click", selectTeam);
  document.getElementById("btn1").addEventListener("click", () => startInitialGames(1));
  document.getElementById("btn5").addEventListener("click", () => startInitialGames(5));
  document.getElementById("btn82").addEventListener("click", () => startInitialGames(82));
});

// ===== 功能 =====
function selectTeam() {
  const teamName = document.getElementById("teamSelect").value;
  playerTeam = teamName;
  document.getElementById("initialGames").style.display = "block";
  renderRoster();
  log(`你選擇了 ${teamName}，進度為 0`);
}

function startInitialGames(num) {
  if (!playerTeam) {
    alert("請先選隊！");
    return;
  }
  let wins = 0;
  for (let i = 0; i < num; i++) {
    if (Math.random() < 0.5) wins++;
  }
  log(`完成 ${num} 場比賽，勝場：${wins}`);
}

function renderRoster() {
  const tbody = document.querySelector("#roster tbody");
  tbody.innerHTML = "";
  teams[playerTeam].forEach(p => {
    const tr = document.createElement("tr");
    tr.innerHTML = `<td>${p.name}</td><td>${p.pos}</td><td>${p.ovr}</td>`;
    tbody.appendChild(tr);
  });
}

function log(text) {
  document.getElementById("log").textContent = text;
}
</script>

</body>
</html>
