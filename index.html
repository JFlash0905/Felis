<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8">
<title>NBA GM MVP 試玩版</title>
<style>
  body { font-family: Arial, sans-serif; background: #f0f0f0; padding: 20px; }
  h1 { text-align: center; }
  table { border-collapse: collapse; margin-bottom: 20px; width: 100%; }
  th, td { border: 1px solid #aaa; padding: 8px; text-align: center; }
  th { background: #333; color: #fff; }
  button { padding: 8px 12px; margin: 5px; cursor: pointer; }
  .winner { background: #a0e6a0; }
</style>
</head>
<body>

<h1>NBA GM MVP 試玩版</h1>

<div id="teams"></div>

<button onclick="simulateGame()">模擬比賽（先發五人）</button>

<div id="result" style="margin-top:20px; font-size: 18px;"></div>

<script>
// --- 初始球隊與球員資料 ---
const teams = [
  {
    name: "Golden State Warriors",
    style: "pace_and_space",
    homeAdv: true,
    roster: [
      {name:"Stephen Curry", pos:"PG", overall:97, superstar:true},
      {name:"Klay Thompson", pos:"SG", overall:90, superstar:false},
      {name:"Draymond Green", pos:"PF", overall:88, superstar:false},
      {name:"Andrew Wiggins", pos:"SF", overall:85, superstar:false},
      {name:"Kevon Looney", pos:"C", overall:80, superstar:false}
    ]
  },
  {
    name: "Boston Celtics",
    style: "balanced",
    homeAdv: false,
    roster: [
      {name:"Jayson Tatum", pos:"SF", overall:96, superstar:true},
      {name:"Jaylen Brown", pos:"SG", overall:90, superstar:false},
      {name:"Marcus Smart", pos:"PG", overall:85, superstar:false},
      {name:"Robert Williams", pos:"C", overall:82, superstar:false},
      {name:"Al Horford", pos:"PF", overall:84, superstar:false}
    ]
  }
];

// --- 顯示球隊 ---
function displayTeams() {
  let html = '';
  teams.forEach(team => {
    html += `<h2>${team.name} (${team.style})</h2>`;
    html += `<table><tr><th>球員</th><th>位置</th><th>Overall</th><th>巨星</th></tr>`;
    team.roster.forEach(p => {
      html += `<tr><td>${p.name}</td><td>${p.pos}</td><td>${p.overall}</td><td>${p.superstar ? '⭐' : ''}</td></tr>`;
    });
    html += `</table>`;
  });
  document.getElementById('teams').innerHTML = html;
}

// --- 模擬比賽 ---
function simulateGame() {
  const [teamA, teamB] = teams;

  function calcTeamPower(team, home=false) {
    let power = 0;
    team.roster.forEach(p => {
      power += p.overall * (p.superstar ? 1.5 : 1);
    });
    power /= team.roster.length;
    
    // 風格微調
    if(team.style === 'pace_and_space') power *= 1.03;
    if(team.style === 'defense_first') power *= 1.05;

    // 主場加成
    if(home) power *= 1.03;

    // 隨機波動 ±5%
    const rand = 0.95 + Math.random()*0.1;
    power *= rand;

    return power;
  }

  const powerA = calcTeamPower(teamA, teamA.homeAdv);
  const powerB = calcTeamPower(teamB, teamB.homeAdv);

  let winner, diff;
  if(powerA > powerB){
    winner = teamA.name;
    diff = Math.round((powerA - powerB)*2);
  } else {
    winner = teamB.name;
    diff = Math.round((powerB - powerA)*2);
  }

  document.getElementById('result').innerHTML =
    `比賽結果：${winner} 勝！分差：約 ${diff} 分`;
}

// --- 初始渲染 ---
displayTeams();
</script>

</body>
</html>
